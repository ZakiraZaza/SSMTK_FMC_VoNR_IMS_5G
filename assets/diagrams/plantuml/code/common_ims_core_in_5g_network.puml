@startuml
set separator .
top to bottom direction
hide stereotype
skinparam linetype ortho

title "Zajedničko IMS jezgro u 5G mreži"

<style>
rectangle {
  HorizontalAlignment center
  BackgroundColor white
  .hidden {
    BackgroundColor transparent
    FontColor transparent
  }
  .hidden_font {
    FontColor transparent   
  }
  .core {
    BackgroundColor #EEEEEE
  }
  .ims {
    BackgroundColor navy
    FontColor white
    FontStyle bold
  }
}
</style>

skinparam rectangle {
  BorderColor black
  BorderColor<<hidden>> transparent
}

cloud "5G mobilna mreža" as "cloud_1" {
  rectangle "0"<<hidden>>
  rectangle "5G UE (VoNR telefon)" as 1
  rectangle "gNB" as 2
  rectangle "_1"<<hidden>> {
    rectangle "_1"<<hidden>> {
      rectangle "5G core (5GC)\nAMF/SMF/UPF" as 3
    }
    rectangle "Zajedničko jezgro" <<core>> as zajednicko_jezgro {
      skinparam NodeSep 100
      rectangle "_1" <<hidden_font>> as 4 {
        rectangle "_1"<<hidden>> {
          rectangle "_1" <<hidden>> {

          }
          rectangle "I-CSCF" <<ims>> as "_2" {
            
          }
          rectangle "AS/TAS" <<ims>> as "_3" {
            
          }
        }
        rectangle "_2"<<hidden>> {
          rectangle "MGCF" <<ims>> as "_1" {

          }
          rectangle "S-CSCF" <<ims>> as "_2" {
            
          }
          rectangle "HSS" <<ims>> as "_3" {
            
          }
        }
        rectangle "_3"<<hidden>> {
          rectangle "PCRF" <<ims>> as "_1" {

          }
          rectangle "P-CSCF" <<ims>> as "_2" {
            
          }
          rectangle "UE" <<ims>> as "_3" {
            
          }
        }
        rectangle "_4"<<hidden>> {
        }
      } 
    }
  }
}

cloud "Fiksna mreža" as "cloud_2" {
  rectangle "_1"<<hidden>> {
    rectangle "_1"<<hidden>> {
      rectangle "AGF/BNG\nfixed access gateway" as 5
    }
  }
  rectangle "Fiksna pristupna tačka\n(xDSL/FTTH)" as 6
  rectangle "CPE/Home router" as 7
  rectangle "SIP telefon/Softphone" as 8
}

rectangle "rectangle_empty"<<hidden>> {

}

cloud_1 -[hidden]right-> rectangle_empty
0 -[hidden]down-> 1
1 -down-> 2
2 -down-> 3
3 -right-> 4
4 <-right- 5
5 <-up- 6
6 <-up- 7
7 <-up- 8
'---'
skinparam {
  ArrowThickness 1
  ArrowColor black
  ArrowFontColor black
  ArrowFontSize 14
  ArrowFontStyle bold
}

cloud_1._1.zajednicko_jezgro.4._1._2 -[hidden]down-> cloud_1._1.zajednicko_jezgro.4._2._2
cloud_1._1.zajednicko_jezgro.4._2._2 -[hidden]down-> cloud_1._1.zajednicko_jezgro.4._3._2
cloud_1._1.zajednicko_jezgro.4._3 -[hidden]down-> cloud_1._1.zajednicko_jezgro.4._4
'---'
cloud_1._1.zajednicko_jezgro.4._1._1 -[hidden]right-> cloud_1._1.zajednicko_jezgro.4._1._2
cloud_1._1.zajednicko_jezgro.4._1._2 -right- cloud_1._1.zajednicko_jezgro.4._1._3: "Ma"
cloud_1._1.zajednicko_jezgro.4._1._2 -left- cloud_1._1.zajednicko_jezgro.4._2._1: "Mg "
cloud_1._1.zajednicko_jezgro.4._1._2 -down- cloud_1._1.zajednicko_jezgro.4._2._2: "Mw "
cloud_1._1.zajednicko_jezgro.4._1._2 -right- cloud_1._1.zajednicko_jezgro.4._2._3: "Cx "
cloud_1._1.zajednicko_jezgro.4._1._3 -down- cloud_1._1.zajednicko_jezgro.4._2._2: "ISC"
cloud_1._1.zajednicko_jezgro.4._1._3 -down- cloud_1._1.zajednicko_jezgro.4._2._3: "Sh"

cloud_1._1.zajednicko_jezgro.4._2._1 -right- cloud_1._1.zajednicko_jezgro.4._2._2: "Mg "
cloud_1._1.zajednicko_jezgro.4._2._2 -right- cloud_1._1.zajednicko_jezgro.4._2._3: "Cx  "
cloud_1._1.zajednicko_jezgro.4._2._2 -down- cloud_1._1.zajednicko_jezgro.4._3._2: "Mw "

cloud_1._1.zajednicko_jezgro.4._3._1 -right- cloud_1._1.zajednicko_jezgro.4._3._2: " Rx   "
cloud_1._1.zajednicko_jezgro.4._3._2 -right- cloud_1._1.zajednicko_jezgro.4._3._3: "Gm "
@enduml